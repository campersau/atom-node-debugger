"use 6to5";

const Rx = require('rx-dom');
const h = require('virtual-dom/h');

const pipe = require('app/pipe');

module.exports = function view()  {
  var dragStart$ = new Rx.Subject();
  var model$ = new Rx.BehaviorSubject(null);

  function renderResizeBar() {
    return h('div.debugger-resize-handle', {
      'ev-mousedown': e => dragStart$.onNext(e),
      style: {
        height: '10px',
        cursor: 'row-resize'
      },
    });
  }

  function render(model) {
    model = model || {};
    return h('atom-panel', {
        className: 'bottom',
        style: {
          display: model.isShow ? 'block' : 'none',
          height: `${model.height}px`
        }
    }, [
      renderResizeBar()
    ]);
  }

  var tree$ = model$.map(render);

  return {
    tree$: tree$,
    observe(model) {
      pipe(model.model$, model$);
    },
    dragStart$: dragStart$
  };
};
